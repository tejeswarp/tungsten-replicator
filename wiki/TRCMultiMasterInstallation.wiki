#summary Tungsten Replicator Cookbook - Multi Master installation
<wiki:toc max_depth="4" />
Up to [TungstenReplicatorCookbook the Tungsten Replicator Cookbook]
==Tungsten Replicator, Apache 2.0 Licensed and on Github==

The Tungsten Replicator project has moved to an Apache 2.0 license, and the code is now hosted on [http://github.com/vmware/tungsten-replicator Github]. 

= Multi-Master Installation =

== Install bi-directional replication ==

Rather than doing it manually, you can use [http://code.google.com/p/tungsten-replicator/wiki/TRCBasicInstallation#Using_the_cookbook:_choose_topology_and_customize_your_installat the cookbook] for each of these recipes.



[https://lh5.googleusercontent.com/_gVfZHGgf5LA/TXO2MfOUagI/AAAAAAAABEc/jvt9lZC8uvY/Tungsten_bi_directional_replication.png]

Using  [http://code.google.com/p/tungsten-replicator/wiki/TRCBasicInstallation#Using_the_cookbook:_choose_topology_and_customize_your_installat the cookbook], you can edit the file NODES_ALL_MASTERS.sh to use only two nodes, and then run

{{{./cookbook/install_all_masters.sh}}}

== Install bi-directional replication with an additional slave ==

The recipe is similar to [TRCMultiMasterInstallation#Install_bi-directional_replication].
Assuming that we have a candidate slave m3.mynetwork.com, which we want to be slave of m2, what we will do is simply add this information to the second installation command:

{{{
SLAVE1=m3.mynetwork.com

  ./tools/tungsten-installer \
    --master-slave \
    --master-host=$MASTER2 \
    --datasource-user=tungsten \
    --datasource-password=secret \
    --service-name=delta \
    --home-directory=$TUNGSTEN_HOME \
    --cluster-hosts=$MASTER2,SLAVE1 \
    --start-and-report
}}}

The only difference is SLAVE1 in the --cluster-hosts list, and Tungsten will take care of the rest.

== Install a three masters replication ==

Using  [http://code.google.com/p/tungsten-replicator/wiki/TRCBasicInstallation#Using_the_cookbook:_choose_topology_and_customize_your_installat the cookbook], you can edit the file NODES_ALL_MASTERS.sh to use only three nodes, and then run

{{{./cookbook/install_all_masters.sh}}}

== Install a four masters replication ==

Using  [http://code.google.com/p/tungsten-replicator/wiki/TRCBasicInstallation#Using_the_cookbook:_choose_topology_and_customize_your_installat the cookbook], you can edit the file NODES_ALL_MASTERS.sh, and then run

{{{./cookbook/install_all_masters.sh}}}

[https://lh4.googleusercontent.com/-gAnEaWOQK40/Tm2NpEWCT0I/AAAAAAAABMc/M3zIn7PdIQg/s720/Tungsten_four_masters_replication.png]

Up to [TungstenReplicatorCookbook the Tungsten Replicator Cookbook]


== Install a star topology ==

In a star topology, all the nodes are masters, passing information through a central point, named "hub".
To define your cluster, using  [http://code.google.com/p/tungsten-replicator/wiki/TRCBasicInstallation#Using_the_cookbook:_choose_topology_and_customize_your_installat the cookbook], you can edit the files COMMON_NODES.sh and eventually NODES_STAR.sh, and then run

{{{./cookbook/install_star.sh}}}


== install a fan-in topology ==

In a fan_in topology, there is one slave, receiving data from several masters.
To define your cluster, using  [http://code.google.com/p/tungsten-replicator/wiki/TRCBasicInstallation#Using_the_cookbook:_choose_topology_and_customize_your_installat the cookbook], you can edit the files COMMON_NODES.sh and eventually NODES_FAN_IN.sh, and then run

{{{./cookbook/install_fan_in.sh}}}